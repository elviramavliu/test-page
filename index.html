<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–¢–µ—Å—Ç–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞ –±–∞–Ω–Ω–µ—Ä–æ–≤ –†–°–Ø</title>
  
  <!-- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –Ø–Ω–¥–µ–∫—Å.–†–µ–∫–ª–∞–º—ã -->
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>

  <style>
    /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    body {
      margin: 0;
      padding: 15px;
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      min-height: 100vh;
    }

    /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .test-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      border-radius: 8px;
    }

    /* –û–±–ª–∞—Å—Ç—å –¥–ª—è –±–∞–Ω–Ω–µ—Ä–æ–≤ */
    .banner-frame {
      border: 2px dashed #ccc;
      margin: 20px 0;
      padding: 15px;
      min-height: 250px;
      background: #fff;
      position: relative;
    }

    /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
    .controls {
      margin: 20px 0;
      padding: 15px;
      background: #f8f8f8;
      border-radius: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    /* –°—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫ */
    button {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      background: #007bff;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #0056b3;
    }

    /* –ë–ª–æ–∫ –æ—Ç–ª–∞–¥–∫–∏ */
    .debug-info {
      color: #666;
      font-size: 0.9em;
      margin-top: 15px;
      padding: 10px;
      background: #f8f8f8;
      border-radius: 4px;
      max-height: 200px;
      overflow-y: auto;
    }

    /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
    @media (max-width: 768px) {
      .test-container {
        padding: 10px;
      }
      
      .banner-frame {
        margin: 10px 0;
        min-height: 200px;
      }
      
      button {
        width: 100%;
        margin: 5px 0;
      }
    }

    /* –°—Ç–∏–ª–∏ —Ñ–æ—Ä–º—ã */
    .banner-form {
      margin: 15px 0;
      padding: 15px;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 6px;
    }

    .form-row {
      margin: 10px 0;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .param-group {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 10px;
      width: 100%;
    }

    .param-input {
      display: flex;
      flex-direction: column;
    }

    .param-input label {
      font-size: 0.8em;
      color: #666;
      margin-bottom: 3px;
    }

    input[type="text"] {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      width: 100%;
    }
  </style>
</head>
<body>
<div class="test-container">
  <h1>–¢–µ—Å—Ç–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞ –±–∞–Ω–Ω–µ—Ä–æ–≤ –†–°–Ø</h1>

  <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
  <div class="controls">
    <button onclick="location.reload()">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
    <button onclick="clearBanner()">–û—á–∏—Å—Ç–∏—Ç—å</button>
    <button onclick="showForm()">–î–æ–±–∞–≤–∏—Ç—å –±–∞–Ω–Ω–µ—Ä</button>
  </div>

  <!-- –§–æ—Ä–º–∞ –¥–ª—è –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ -->
  <div class="banner-form" id="bannerForm" style="display: none;">
    <div class="form-row">
      <div class="param-group">
        <div class="param-input">
          <label>Owner ID (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
          <input type="text" id="ownerId" placeholder="391204" required>
        </div>
        <div class="param-input">
          <label>Container ID</label>
          <input type="text" id="containerId" placeholder="adfox_123">
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="param-group">
        <div class="param-input">
          <label>–ü–∞—Ä–∞–º–µ—Ç—Ä p1</label>
          <input type="text" id="paramP1" placeholder="dcokb">
        </div>
        <div class="param-input">
          <label>–ü–∞—Ä–∞–º–µ—Ç—Ä p2</label>
          <input type="text" id="paramP2" placeholder="jaap">
        </div>
        <div class="param-input">
          <label>–ü–∞—Ä–∞–º–µ—Ç—Ä pfc</label>
          <input type="text" id="paramPfc" placeholder="dzokd">
        </div>
        <div class="param-input">
          <label>–ü–∞—Ä–∞–º–µ—Ç—Ä pfb</label>
          <input type="text" id="paramPfb" placeholder="bghwdj">
        </div>
      </div>
    </div>

    <div class="form-row">
      <button onclick="addNewBanner()">–°–æ–∑–¥–∞—Ç—å</button>
      <button onclick="hideForm()" style="background: #dc3545;">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –±–∞–Ω–Ω–µ—Ä–æ–≤ -->
  <div class="banner-frame" id="bannerContainer">
    <!-- 
      –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ:
      <div id="adfox_171759750909741211"></div> 
    -->
  </div>

  <!-- –ö–æ–Ω—Å–æ–ª—å –æ—Ç–ª–∞–¥–∫–∏ -->
  <div class="debug-info" id="debugOutput"></div>
</div>

<script>
  // –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  let bannerCounter = 1;

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
  function showForm() {
    document.getElementById('bannerForm').style.display = 'block';
  }

  function hideForm() {
    document.getElementById('bannerForm').style.display = 'none';
    clearForm();
  }

  function clearForm() {
    document.getElementById('ownerId').value = '';
    document.getElementById('containerId').value = '';
    document.getElementById('paramP1').value = '';
    document.getElementById('paramP2').value = '';
    document.getElementById('paramPfc').value = '';
    document.getElementById('paramPfb').value = '';
  }

  // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
  function addNewBanner() {
    const params = {
      ownerId: document.getElementById('ownerId').value,
      containerId: document.getElementById('containerId').value || `adfox_${Date.now()}`,
      p1: document.getElementById('paramP1').value,
      p2: document.getElementById('paramP2').value,
      pfc: document.getElementById('paramPfc').value,
      pfb: document.getElementById('paramPfb').value
    };

    if (!params.ownerId) {
      alert('–ü–æ–ª–µ Owner ID –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è');
      return;
    }

    const newBanner = document.createElement('div');
    newBanner.id = params.containerId;

    clearBanner();
    document.getElementById('bannerContainer').appendChild(newBanner);

    window.yaContextCb.push(() => {
      try {
        Ya.adfoxCode.create({
          ownerId: params.ownerId,
          containerId: params.containerId,
          params: {
            p1: params.p1 || 'dcokb',
            p2: params.p2 || 'jaap',
            pfc: params.pfc || 'dzokd',
            pfb: params.pfb || 'bbgseq'
          }
        });
        logMessage(`‚úÖ –ë–∞–Ω–Ω–µ—Ä #${bannerCounter} —Å–æ–∑–¥–∞–Ω: ${JSON.stringify(params)}`);
        bannerCounter++;
      } catch (error) {
        logMessage(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
      }
    });

    hideForm();
  }

  function clearBanner() {
    document.getElementById('bannerContainer').innerHTML = '';
    logMessage('‚ö†Ô∏è –í—Å–µ –±–∞–Ω–Ω–µ—Ä—ã —É–¥–∞–ª–µ–Ω—ã');
  }

  function logMessage(message) {
    const debugDiv = document.getElementById('debugOutput');
    const entry = document.createElement('div');
    entry.innerHTML = `<div>${new Date().toLocaleTimeString()}: ${message}</div>`;
    debugDiv.appendChild(entry);
    debugDiv.scrollTop = debugDiv.scrollHeight;
  }

  /* 
    –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ:
    
  window.yaContextCb.push(() => {
    try {
      Ya.adfoxCode.create({
        ownerId: 391204,
        containerId: 'adfox_171759750909741211',
        params: {
          p1: 'dcokb',
          p2: 'jaap',
          pfc: 'dzokd',
          pfb: 'bbgseq'
        }
      });
      logMessage('üéâ –î–µ–º–æ-–±–∞–Ω–Ω–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω');
    } catch (error) {
      logMessage(`‚õî –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`);
    }
  });
  */
</script>
</body>
</html>
